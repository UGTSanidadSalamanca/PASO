<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Campa√±a "P.A.S.O."</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 350px; /* Controla el tama√±o m√°ximo del gr√°fico */
            height: 350px;
            margin-left: auto;
            margin-right: auto;
        }
        .tab-active {
            border-bottom-color: #a78bfa; /* Violeta */
            color: #7c3aed;
            font-weight: 600;
        }
        .task-card {
            transition: all 0.3s ease;
        }
        .task-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Chosen Palette: Calma Org√°nica (Slate, Violet, Beige) -->
    <!-- Application Structure Plan: Se ha dise√±ado una SPA con navegaci√≥n por pesta√±as (Panel, Fases, Generador, Galer√≠a) basada en el guion de campa√±a. Esta estructura funcional separa la visi√≥n general (Panel), la planificaci√≥n detallada (Fases), la creaci√≥n de contenido (Generador) y el archivo de ideas (Galer√≠a). Este flujo de trabajo es intuitivo y permite al usuario gestionar la campa√±a de P.A.S.O. de manera eficiente, pasando de la estrategia a la ejecuci√≥n sin fricciones. -->
    <!-- Visualization & Content Choices: 
        - Progreso de Campa√±a (Panel): Se utiliza un gr√°fico de Donut (Chart.js) para una visualizaci√≥n r√°pida y atractiva del estado de las tareas, traduciendo el progreso del guion a una m√©trica visual.
        - Fases y Tareas (Fases): Las tarjetas interactivas (HTML/Tailwind) representan cada fase y tarea del guion, permitiendo una gesti√≥n directa y clara del plan de acci√≥n.
        - Generador de Contenido (Generador): Un formulario HTML que, mediante JS, simula la generaci√≥n de contenido sat√≠rico alineado con el tono de P.A.S.O., convirtiendo las propuestas del guion en publicaciones listas para usar.
        - Iconograf√≠a: Se emplean caracteres Unicode (‚ûï, ‚úèÔ∏è, üóëÔ∏è, üí°) para las acciones, manteniendo la simplicidad y evitando dependencias externas.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <div id="app" class="min-h-screen">
        <header class="bg-white shadow-sm sticky top-0 z-10">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-4">
                    <h1 class="text-xl sm:text-2xl font-bold text-violet-700">P.A.S.O. <span class="font-light text-slate-500">| Gestor de Campa√±a</span></h1>
                    <nav class="hidden sm:flex space-x-4 border-b-2 border-transparent">
                        <button data-tab="dashboard" class="nav-tab py-2 px-3 text-sm font-medium text-slate-600 hover:text-violet-600 border-b-2 border-transparent">Panel</button>
                        <button data-tab="phases" class="nav-tab py-2 px-3 text-sm font-medium text-slate-600 hover:text-violet-600 border-b-2 border-transparent">Fases y Tareas</button>
                        <button data-tab="generator" class="nav-tab py-2 px-3 text-sm font-medium text-slate-600 hover:text-violet-600 border-b-2 border-transparent">Generador</button>
                        <button data-tab="gallery" class="nav-tab py-2 px-3 text-sm font-medium text-slate-600 hover:text-violet-600 border-b-2 border-transparent">Galer√≠a</button>
                    </nav>
                </div>
            </div>
        </header>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            
            <!-- Dashboard Section -->
            <section id="dashboard-section" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow">
                        <h2 class="text-2xl font-bold mb-4">Panel de Control de P.A.S.O.</h2>
                        <p class="text-slate-600 mb-6">Aqu√≠ tienes un resumen del progreso de la campa√±a. Recuerda, cada tarea completada es un paso m√°s hacia la acomodaci√≥n perfecta.</p>
                        <div class="chart-container">
                            <canvas id="progressChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-xl font-bold mb-4">Pr√≥ximas Tareas (sin prisa)</h3>
                        <div id="upcoming-tasks-list" class="space-y-3">
                            <!-- Upcoming tasks will be rendered here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Phases and Tasks Section -->
            <section id="phases-section" class="tab-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Fases de la Campa√±a P.A.S.O.</h2>
                </div>
                <div id="phases-container" class="space-y-8">
                    <!-- Phases and tasks will be rendered here -->
                </div>
            </section>

            <!-- Generator Section -->
            <section id="generator-section" class="tab-content hidden">
                <h2 class="text-2xl font-bold mb-6">Generador de Contenido para RRSS</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-xl font-bold mb-4">Crear Publicaci√≥n Ir√≥nica</h3>
                        <form id="generator-form">
                            <div class="mb-4">
                                <label for="problem-input" class="block text-sm font-medium text-slate-700 mb-1">Problema real a parodiar</label>
                                <input type="text" id="problem-input" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500" placeholder="Ej: horas extras no pagadas, falta de material">
                            </div>
                            <div class="mb-6">
                                <label for="content-type-select" class="block text-sm font-medium text-slate-700 mb-1">Formato de la publicaci√≥n</label>
                                <select id="content-type-select" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500">
                                    <option>Meme</option>
                                    <option>Propuesta de P.A.S.O.</option>
                                    <option>Encuesta para WhatsApp</option>
                                </select>
                            </div>
                            <button type="submit" class="w-full bg-violet-600 text-white font-bold py-2 px-4 rounded-md hover:bg-violet-700 transition-colors">Generar Ideas üí°</button>
                        </form>
                    </div>
                    <div id="generated-content-container" class="bg-slate-100 p-6 rounded-lg border border-dashed border-slate-300">
                        <div id="generator-output" class="text-center text-slate-500 h-full flex flex-col justify-center items-center">
                           <p>Las ideas generadas aparecer√°n aqu√≠...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gallery Section -->
            <section id="gallery-section" class="tab-content hidden">
                <h2 class="text-2xl font-bold mb-6">Galer√≠a de Contenido Guardado</h2>
                <div id="gallery-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Saved content will be rendered here -->
                </div>
            </section>
        </main>
        
        <!-- Mobile Navigation -->
        <nav class="sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-around">
            <button data-tab="dashboard" class="nav-tab flex-1 py-3 px-2 text-xs flex flex-col items-center text-slate-600 hover:text-violet-600 border-t-2 border-transparent">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>
                Panel
            </button>
            <button data-tab="phases" class="nav-tab flex-1 py-3 px-2 text-xs flex flex-col items-center text-slate-600 hover:text-violet-600 border-t-2 border-transparent">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" /></svg>
                Tareas
            </button>
            <button data-tab="generator" class="nav-tab flex-1 py-3 px-2 text-xs flex flex-col items-center text-slate-600 hover:text-violet-600 border-t-2 border-transparent">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                Generador
            </button>
            <button data-tab="gallery" class="nav-tab flex-1 py-3 px-2 text-xs flex flex-col items-center text-slate-600 hover:text-violet-600 border-t-2 border-transparent">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                Galer√≠a
            </button>
        </nav>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA STORE (Based on "paso-guion-campana") ---
            let state = {
                phases: [
                    {
                        id: 1,
                        name: 'Fase 1: El Gran P.A.S.O. Inicial',
                        description: 'Introducir a P.A.S.O., generar intriga y comenzar a sembrar la parodia.',
                        tasks: [
                            { id: 1, title: 'Crear perfiles RRSS de P.A.S.O. (an√≥nimo)', status: 'Completada' },
                            { id: 2, title: 'Dise√±ar logo y eslogan amable de P.A.S.O.', status: 'Completada' },
                            { id: 3, title: 'Publicar "El Expediente de Quejas del Buen Conformista"', status: 'En Progreso' },
                        ]
                    },
                    {
                        id: 2,
                        name: 'Fase 2: El P.A.S.O. al Frente (o hacia el Sof√°)',
                        description: 'Intensificar la parodia, aumentar la identificaci√≥n y generar debate.',
                        tasks: [
                            { id: 4, title: 'Publicar "Los D√≠as Extra por Paciencia Extrema"', status: 'Pendiente' },
                            { id: 5, title: 'Lanzar encuesta "¬øEres un \'PASO-Conformista\'?"', status: 'Pendiente' },
                            { id: 6, title: 'Crear v√≠deo corto "P.O.R.H. ¬°Optimiza tu inacci√≥n!"', status: 'Pendiente' },
                        ]
                    },
                    {
                        id: 3,
                        name: 'Fase 3: El √öltimo P.A.S.O.',
                        description: 'La gran revelaci√≥n y el giro hacia el sindicato real.',
                        tasks: [
                            { id: 7, title: 'Preparar mensaje final de "despertar"', status: 'Pendiente' },
                            { id: 8, title: 'Dise√±ar micrositio con propuestas REALES del sindicato', status: 'Pendiente' },
                        ]
                    }
                ],
                gallery: [],
                activeTab: 'dashboard',
                progressChartInstance: null
            };

            // --- RENDER FUNCTIONS ---
            const getStatusBadge = (status) => {
                const styles = {
                    'Completada': 'bg-green-100 text-green-800',
                    'En Progreso': 'bg-yellow-100 text-yellow-800',
                    'Pendiente': 'bg-red-100 text-red-800'
                };
                return styles[status] || 'bg-slate-100 text-slate-800';
            };
            
            const renderPhases = () => {
                const container = document.getElementById('phases-container');
                container.innerHTML = state.phases.map(phase => `
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-xl font-bold">${phase.name}</h3>
                        <p class="text-slate-500 mt-1 mb-4">${phase.description}</p>
                        <div class="space-y-3">
                            ${phase.tasks.map(task => `
                                <div class="task-card border border-slate-200 p-4 rounded-md flex justify-between items-center">
                                    <div>
                                        <p class="font-semibold">${task.title}</p>
                                        <span class="text-xs font-medium px-2 py-0.5 rounded-full ${getStatusBadge(task.status)}">${task.status}</span>
                                    </div>
                                    <div class="flex space-x-2">
                                        <select data-task-id="${task.id}" class="task-status-select text-xs border-slate-300 rounded-md py-1">
                                            <option value="Pendiente" ${task.status === 'Pendiente' ? 'selected' : ''}>Pendiente</option>
                                            <option value="En Progreso" ${task.status === 'En Progreso' ? 'selected' : ''}>En Progreso</option>
                                            <option value="Completada" ${task.status === 'Completada' ? 'selected' : ''}>Completada</option>
                                        </select>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `).join('');
            };

            const renderDashboard = () => {
                const allTasks = state.phases.flatMap(p => p.tasks);
                const completedTasks = allTasks.filter(t => t.status === 'Completada').length;
                const pendingTasks = allTasks.length - completedTasks;

                const chartCtx = document.getElementById('progressChart').getContext('2d');
                if (state.progressChartInstance) {
                    state.progressChartInstance.destroy();
                }
                state.progressChartInstance = new Chart(chartCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Completadas', 'Pendientes'],
                        datasets: [{
                            data: [completedTasks, pendingTasks],
                            backgroundColor: ['#10b981', '#f87171'],
                            borderColor: ['#ffffff'],
                            borderWidth: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '70%',
                        plugins: {
                            legend: {
                                position: 'bottom',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${context.raw}`;
                                    }
                                }
                            }
                        }
                    }
                });

                const upcomingTasksContainer = document.getElementById('upcoming-tasks-list');
                const upcomingTasks = allTasks.filter(t => t.status !== 'Completada').slice(0, 5);
                if (upcomingTasks.length > 0) {
                    upcomingTasksContainer.innerHTML = upcomingTasks.map(task => `
                        <div class="bg-slate-100 p-3 rounded-md">
                            <p class="font-semibold text-sm">${task.title}</p>
                            <span class="text-xs font-medium px-2 py-0.5 rounded-full ${getStatusBadge(task.status)}">${task.status}</span>
                        </div>
                    `).join('');
                } else {
                    upcomingTasksContainer.innerHTML = `<p class="text-slate-500 text-sm">¬°Todas las tareas completadas! ¬°Misi√≥n cumplida!</p>`;
                }
            };

            const renderGallery = () => {
                const container = document.getElementById('gallery-container');
                if (state.gallery.length === 0) {
                    container.innerHTML = `<p class="text-slate-500 col-span-full text-center">Tu galer√≠a de ideas est√° vac√≠a. ¬°Es hora de generar algo de contenido!</p>`;
                    return;
                }
                container.innerHTML = state.gallery.map(item => `
                    <div class="bg-white p-4 rounded-lg shadow task-card flex flex-col justify-between">
                        <div>
                            <p class="text-xs font-semibold text-violet-600 uppercase">${item.type}</p>
                            <p class="mt-2 font-medium">${item.text}</p>
                            <img src="https://placehold.co/600x400/f3e8ff/4c1d95?text=Meme+de+P.A.S.O." alt="Imagen de meme generada" class="my-2 w-full h-auto rounded-md object-cover">
                            <p class="text-sm text-slate-500 mt-2"><em>Prompt de imagen: ${item.prompt}</em></p>
                        </div>
                        <button data-gallery-id="${item.id}" class="delete-gallery-item-btn text-xs text-red-500 hover:text-red-700 mt-4 text-right self-end">Eliminar üóëÔ∏è</button>
                    </div>
                `).join('');
            };
            
            const renderGeneratorOutput = (ideas) => {
                const container = document.getElementById('generator-output');
                container.innerHTML = ideas.map((idea, index) => `
                    <div class="bg-white p-4 rounded-lg shadow mb-4 w-full">
                        <p class="font-semibold">${idea.text}</p>
                        <img src="https://placehold.co/600x400/f3e8ff/4c1d95?text=Meme+de+P.A.S.O." alt="Imagen de meme generada" class="my-2 w-full h-auto rounded-md object-cover">
                        <p class="text-sm text-slate-500 mt-1"><em>Prompt de imagen: ${idea.prompt}</em></p>
                        <button data-idea-index="${index}" class="save-idea-btn mt-3 w-full text-sm bg-violet-100 text-violet-800 font-bold py-1 px-3 rounded-md hover:bg-violet-200 transition-colors">Guardar Idea</button>
                    </div>
                `).join('');
            };

            // --- EVENT HANDLERS & LOGIC ---
            const switchTab = (tabId) => {
                state.activeTab = tabId;
                document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
                document.getElementById(`${tabId}-section`).classList.remove('hidden');

                document.querySelectorAll('.nav-tab').forEach(el => {
                    el.classList.remove('tab-active');
                    if (el.dataset.tab === tabId) {
                        el.classList.add('tab-active');
                    }
                });
                
                if (tabId === 'dashboard') renderDashboard();
                if (tabId === 'phases') renderPhases();
                if (tabId === 'gallery') renderGallery();
            };

            document.body.addEventListener('click', (e) => {
                if (e.target.closest('.nav-tab')) {
                    switchTab(e.target.closest('.nav-tab').dataset.tab);
                }
                if (e.target.matches('.save-idea-btn')) {
                    const ideaIndex = parseInt(e.target.dataset.ideaIndex);
                    const ideas = JSON.parse(e.target.closest('#generator-output').dataset.currentIdeas);
                    const ideaToSave = ideas[ideaIndex];
                    
                    state.gallery.push({
                        id: Date.now(),
                        type: document.getElementById('content-type-select').value,
                        ...ideaToSave
                    });
                    
                    renderGallery();
                    document.getElementById('generator-output').innerHTML = `<p class="text-green-600 font-semibold">¬°Idea guardada en la Galer√≠a!</p>`;
                    setTimeout(() => {
                         document.getElementById('generator-output').innerHTML = `<p class="text-slate-500">Las ideas generadas aparecer√°n aqu√≠...</p>`;
                    }, 2000);
                }
                if (e.target.matches('.delete-gallery-item-btn')) {
                    const galleryId = parseInt(e.target.dataset.galleryId);
                    state.gallery = state.gallery.filter(item => item.id !== galleryId);
                    renderGallery();
                }
            });
            
            document.body.addEventListener('change', (e) => {
                if (e.target.matches('.task-status-select')) {
                    const taskId = parseInt(e.target.dataset.taskId);
                    const newStatus = e.target.value;
                    state.phases.forEach(phase => {
                        const task = phase.tasks.find(t => t.id === taskId);
                        if (task) task.status = newStatus;
                    });
                    renderPhases();
                    if (state.activeTab === 'dashboard') {
                        renderDashboard();
                    }
                }
            });

            document.getElementById('generator-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const problem = document.getElementById('problem-input').value;
                const type = document.getElementById('content-type-select').value;
                if (!problem.trim()) {
                    alert('Por favor, describe un problema para parodiar.');
                    return;
                }
                
                const outputContainer = document.getElementById('generator-output');
                outputContainer.innerHTML = `<div class="flex flex-col items-center justify-center h-full"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-violet-600"></div><p class="mt-4">Generando ideas...</p></div>`;

                setTimeout(() => {
                    const ideas = getMockIdeas(problem, type);
                    outputContainer.dataset.currentIdeas = JSON.stringify(ideas);
                    renderGeneratorOutput(ideas);
                }, 1500);
            });
            
            // MOCK API FUNCTION
            const getMockIdeas = (problem, type) => {
                return [
                    {
                        text: `Propuesta de P.A.S.O. sobre "${problem}": Hemos creado el 'Certificado de Aceptaci√≥n Zen'. Acumula puntos cada vez que aceptas "${problem}" con una sonrisa. ¬°Canj√©alos por nuestra admiraci√≥n silenciosa!`,
                        prompt: `Un diploma de aspecto oficial con el t√≠tulo "Certificado de Aceptaci√≥n Zen". En el centro, un emoji sonriente con los ojos cerrados. Estilo: Clipart corporativo ir√≥nico.`
                    },
                    {
                        text: `Encuesta sobre "${problem}": Cuando te enfrentas a "${problem}", tu reacci√≥n es: A) Suspirar y seguir adelante. B) Cont√°rselo a la planta de la oficina. C) Esperar a que se solucione por arte de magia.`,
                        prompt: `Tres emojis representando las opciones: una cara suspirando, una persona hablando a una planta de interior, y una varita m√°gica. Estilo: Gr√°fico de encuesta de Instagram.`
                    }
                ];
            };

            // INITIALIZATION
            switchTab('dashboard');
        });
    </script>
</body>
</html>
